<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">

<head>
    <link rel="stylesheet" href="Styling.css">
    <style>
        form {
            padding: 10px;
        }

        button {
            position: relative;
            top: 15px;
        }

    </style>
    <meta charset="UTF-8">
    <title>Flight Search</title>
</head>

<body>
    <h1>
        Available Flights
    </h1>
    <div>
        <table>
            <thead>
                <tr>
                    <th>Flight #</th>
                    <th>Origin</th>
                    <th>Destination</th>
                    <th>Date</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody id="flightsTable">

            </tbody>
        </table>
    </div>
    <form action="BookFlight.html">
        <button type="submit" name ="BookFlight">Book a Flight</button>
    </form>
    <form action="MainMenu.html">
        <button type="submit" name="MainMenu">Main Menu</button>
    </form>
    <script>
        (async function retrieveFlights() {
            let response = await fetch("http://localhost:8080/Project-Plan/search");
            let json = await response.json();
            let table = document.getElementById("flightsTable");
                for (let element of json) {
                    let tr = table.insertRow(-1);
                    for(let key in element) {
                        if (key === "user"){
                            break;
                        } else if (key === "tickets"){
                            break;
                        } else {
                            let cell = tr.insertCell(-1);
                            cell.innerHTML = element[key];
                        }
                    }
            }
        })();
    </script>
</body>
</html>