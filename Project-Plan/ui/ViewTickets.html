<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="Styling.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo List</title>
</head>

<body>
<table class="table table-responsive">
     <thead>
         <tr>
             <th>Ticket ID</th>
             <th>Check-In</th>
             <th>Cancel</th>
             <th>First Name</th>
             <th>Last Name</th>
             <th>Flight #</th>
             <th>User ID</th>
         </tr>
     </thead>
        <tbody id="TicketTable">
            <form>
            </form>
        </tbody>
</table>


    <script>
        // (function getQueryParameter() {
        //     let urlParameters = new URLSearchParams(window.location.search);
        //     console.log("total url params: ", urlParameters);//console.dir?
        //     console.log("query parameter test: ", urlParameters.get("testParameter"));//value should be "test"
        //     console.log("query parameter username: ", urlParameters.get("username"));//value should be "kyle"
        // })();
        //http://localhost:8080/to-do-api/toDoItems
        //http://todoapp.us-east-2.elasticbeanstalk.com/toDoItems
        (async function retrieveTickets() {
             let response = await fetch("http://localhost:8080/Project-1/tickets");
             let json = await response.json();
             let table = document.getElementById("TicketTable");
                 for (let element of json) {
                    let tr = table.insertRow(-1);
                    if (element == 'user'){
                        let cell = tr.insertCell(-1);
                        cell.innerHTML = user[0];
                    } else if (element == 'flight'){
                        for (let key of element){
                            let cell = tr.insertCell(-1);
                            cell.innerHTML = flight[0];
                        } 
                    // } else if (element == 'checkIn' || element == 'cancel') {
                    //     let cell = tr.insertCell(-1);
                    //     var chk = document.createElement('input');
                    //     var lbl = document.createElement('label');

                    //     chk.setAttribute('type', 'checkbox');
                    //     chk.setAttribute('value', 'yes');
                    //     lbl.appendChild(document.createTextNode('Yes'));

                    //     cell.appendChild(chk);
                    //     cell.appendChild(lbl);
                    // } 
                     } else {
                        for(let key in element) {
                            let cell = tr.insertCell(-1);
                            cell.innerHTML = element[key];
                        }
                    }
                }
            })();

        //function populateTable()

        // (async function testThingy() {
        //     let response = await fetch("http://localhost:8080/simple-servlets/things/");
        //     console.log("Test thingy: ", response.text);
        // })();

    </script>
</body>

</html>