<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="Styling.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo List</title>
</head>

<body>
<table class="table table-responsive">
     <thead>
         <tr>
             <th>Ticket ID</th>
             <th>User ID</th>
             <th>Flight #</th>
             <th>First Name</th>
             <th>Last Name</th>
             <th>Check-In</th>
             <th>Cancel</th>
         </tr>
     </thead>
        <tbody id="TicketTable">
        </tbody>
</table>


    <script>
        (async function retrieveTickets() {
             let response = await fetch("http://localhost:8080/Project-Plan/tickets");
             let json = await response.json();
             let table = document.getElementById("TicketTable");
                 for (let element of json) { 
                    let tr = table.insertRow(-1);
                    for (let key in element) {
                        let cell = tr.insertCell(-1);
                        if (key === "user"){
                            for (let key2 in element[key]){
                               if (key2 === "user_id"){
                                   cell.innerHTML = element[key][key2];
                               }
                            }
                        } else if (key === "flight"){
                            for (let key2 in element[key]){
                                if (key2 === "flight_num"){
                                   cell.innerHTML = element[key][key2];
                               }
                            }
                        } else {
                            cell.innerHTML = element[key];
                        }
                    }
                }
            })();

    </script>
</body>

</html>